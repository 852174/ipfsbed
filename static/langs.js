const translations = {
    'zh-CN': {
        // Meta information
        'meta-title': 'IPFSBED - 永久的去中心化IPFS图床服务 | ipfsbed.is-an.org',
        'meta-keywords': 'IPFSBED,IPFS图床,IPFS,去中心化图床,永久图床,星际文件系统,图片托管,免费图床,文件上传',
        'meta-description': 'IPFSBED是一个基于IPFS(星际文件系统)的永久性、去中心化的图片托管服务。支持拖拽上传、粘贴上传等多种上传方式,提供多个可靠的访问网关。',
        
        // UI elements
        'upload-text': '点击上传 / 粘贴上传 / 拖拽上传',
        'upload-description': '永久的、去中心化保存和共享文件',
        'file-list': '上传列表',
        'copy-all': '复制全部',
        'gateway-selector': '访问网关：',
        'footer-project': '项目地址',
        'footer-more-gateways': '更多网关',
        'footer-copyright': '© 2021-2025 IPFSBED - 基于IPFS的去中心化图床服务',
        
        // Toast messages
        'clipboard-empty': '当前浏览器不支持粘贴上传',
        'clipboard-no-file': '剪切板内无内容或不支持桌面文件',
        'unsupported-type': '不支持该文件类型，仅支持图片、文档、文本等常见文件格式',
        'file-too-large': '上传的文件不能超过{size}MB',
        'upload-error': '上传出错！请稍后重试',
        'copied-format': '已复制{format}格式的链接到剪贴板',
        'copied-all': '所有链接已复制到剪贴板',
        'all-apis-failed': '所有API尝试失败',
        
        // File info
        'file-size': 'SIZE: {size}'
    },
    'en': {
        // Meta information
        'meta-title': 'IPFSBED - Permanent Decentralized IPFS Image Hosting | ipfsbed.is-an.org',
        'meta-keywords': 'IPFSBED,IPFS image hosting,IPFS,decentralized image hosting,permanent image hosting,InterPlanetary File System,image hosting,free image hosting,file upload',
        'meta-description': 'IPFSBED is a permanent, decentralized image hosting service based on IPFS (InterPlanetary File System). It supports multiple upload methods including drag-and-drop and paste, and provides multiple reliable access gateways.',
        
        // UI elements
        'upload-text': 'Click to Upload / Paste / Drag and Drop',
        'upload-description': 'Permanently and decentralized store and share files',
        'file-list': 'Upload List',
        'copy-all': 'Copy All',
        'gateway-selector': 'Access Gateway:',
        'footer-project': 'Project',
        'footer-more-gateways': 'More Gateways',
        'footer-copyright': '© 2021-2025 IPFSBED - IPFS-based Decentralized Image Hosting',
        
        // Toast messages
        'clipboard-empty': 'Current browser does not support paste upload',
        'clipboard-no-file': 'No content in clipboard or desktop file not supported',
        'unsupported-type': 'Unsupported file type, only common formats like images, documents, and text files are supported',
        'file-too-large': 'Uploaded file cannot exceed {size}MB',
        'upload-error': 'Upload error! Please try again later',
        'copied-format': '{format} format link copied to clipboard',
        'copied-all': 'All links copied to clipboard',
        'all-apis-failed': 'All API attempts failed',
        
        // File info
        'file-size': 'SIZE: {size}'
    },
    'de': {
        // Meta information
        'meta-title': 'IPFSBED - Permanentes dezentralisiertes IPFS-Bildhosting | ipfsbed.is-an.org',
        'meta-keywords': 'IPFSBED,IPFS-Bildhosting,IPFS,dezentralisiertes Bildhosting,dauerhaftes Bildhosting,InterPlanetary File System,Bildhosting,kostenloses Bildhosting,Datei-Upload',
        'meta-description': 'IPFSBED ist ein permanenter, dezentralisierter Bildhosting-Dienst, der auf IPFS (InterPlanetary File System) basiert. Es unterstützt mehrere Upload-Methoden, einschließlich Drag-and-Drop und Einfügen, und bietet mehrere zuverlässige Zugangs-Gateways.',
        
        // UI elements
        'upload-text': 'Zum Hochladen klicken / Einfügen / Drag and Drop',
        'upload-description': 'Dateien permanent und dezentralisiert speichern und teilen',
        'file-list': 'Upload-Liste',
        'copy-all': 'Alle kopieren',
        'gateway-selector': 'Zugangs-Gateway:',
        'footer-project': 'Projekt',
        'footer-more-gateways': 'Mehr Gateways',
        'footer-copyright': '© 2021-2025 IPFSBED - IPFS-basiertes dezentralisiertes Bildhosting',
        
        // Toast messages
        'clipboard-empty': 'Aktueller Browser unterstützt keinen Einfüge-Upload',
        'clipboard-no-file': 'Kein Inhalt in der Zwischenablage oder Desktop-Datei wird nicht unterstützt',
        'unsupported-type': 'Nicht unterstützter Dateityp, nur gängige Formate wie Bilder, Dokumente und Textdateien werden unterstützt',
        'file-too-large': 'Hochgeladene Datei darf {size}MB nicht überschreiten',
        'upload-error': 'Upload-Fehler! Bitte versuchen Sie es später erneut',
        'copied-format': 'Link im {format}-Format in die Zwischenablage kopiert',
        'copied-all': 'Alle Links in die Zwischenablage kopiert',
        'all-apis-failed': 'Alle API-Versuche fehlgeschlagen',
        
        // File info
        'file-size': 'GRÖSSE: {size}'
    },
    'ru': {
        // Meta information
        'meta-title': 'IPFSBED - Постоянный децентрализованный хостинг изображений IPFS | ipfsbed.is-an.org',
        'meta-keywords': 'IPFSBED,хостинг изображений IPFS,IPFS,децентрализованный хостинг изображений,постоянный хостинг изображений,межпланетная файловая система,хостинг изображений,бесплатный хостинг изображений,загрузка файлов',
        'meta-description': 'IPFSBED - это постоянная, децентрализованная служба хостинга изображений на основе IPFS (межпланетная файловая система). Она поддерживает несколько методов загрузки, включая перетаскивание и вставку, и предоставляет несколько надежных шлюзов доступа.',
        
        // UI elements
        'upload-text': 'Нажмите для загрузки / Вставьте / Перетащите',
        'upload-description': 'Постоянно и децентрализованно храните и делитесь файлами',
        'file-list': 'Список загрузок',
        'copy-all': 'Копировать все',
        'gateway-selector': 'Шлюз доступа:',
        'footer-project': 'Проект',
        'footer-more-gateways': 'Больше шлюзов',
        'footer-copyright': '© 2021-2025 IPFSBED - Децентрализованный хостинг изображений на основе IPFS',
        
        // Toast messages
        'clipboard-empty': 'Текущий браузер не поддерживает загрузку вставкой',
        'clipboard-no-file': 'Нет содержимого в буфере обмена или настольный файл не поддерживается',
        'unsupported-type': 'Неподдерживаемый тип файла, поддерживаются только распространенные форматы, такие как изображения, документы и текстовые файлы',
        'file-too-large': 'Загружаемый файл не может превышать {size}МБ',
        'upload-error': 'Ошибка загрузки! Пожалуйста, повторите попытку позже',
        'copied-format': 'Ссылка в формате {format} скопирована в буфер обмена',
        'copied-all': 'Все ссылки скопированы в буфер обмена',
        'all-apis-failed': 'Все попытки API не удались',
        
        // File info
        'file-size': 'РАЗМЕР: {size}'
    },
    'fr': {
        // Meta information
        'meta-title': 'IPFSBED - Hébergement d\'images IPFS décentralisé permanent | ipfsbed.is-an.org',
        'meta-keywords': 'IPFSBED,hébergement d\'images IPFS,IPFS,hébergement d\'images décentralisé,hébergement d\'images permanent,système de fichiers interplanétaire,hébergement d\'images,hébergement d\'images gratuit,téléchargement de fichiers',
        'meta-description': 'IPFSBED est un service d\'hébergement d\'images permanent et décentralisé basé sur IPFS (système de fichiers interplanétaire). Il prend en charge plusieurs méthodes de téléchargement, y compris le glisser-déposer et le collage, et fournit plusieurs passerelles d\'accès fiables.',
        
        // UI elements
        'upload-text': 'Cliquez pour télécharger / Collez / Glissez-déposez',
        'upload-description': 'Stockez et partagez des fichiers de manière permanente et décentralisée',
        'file-list': 'Liste des téléchargements',
        'copy-all': 'Tout copier',
        'gateway-selector': 'Passerelle d\'accès :',
        'footer-project': 'Projet',
        'footer-more-gateways': 'Plus de passerelles',
        'footer-copyright': '© 2021-2025 IPFSBED - Hébergement d\'images décentralisé basé sur IPFS',
        
        // Toast messages
        'clipboard-empty': 'Le navigateur actuel ne prend pas en charge le téléchargement par collage',
        'clipboard-no-file': 'Pas de contenu dans le presse-papiers ou fichier de bureau non pris en charge',
        'unsupported-type': 'Type de fichier non pris en charge, seuls les formats courants comme les images, les documents et les fichiers texte sont pris en charge',
        'file-too-large': 'Le fichier téléchargé ne peut pas dépasser {size}MB',
        'upload-error': 'Erreur de téléchargement ! Veuillez réessayer plus tard',
        'copied-format': 'Lien au format {format} copié dans le presse-papiers',
        'copied-all': 'Tous les liens copiés dans le presse-papiers',
        'all-apis-failed': 'Toutes les tentatives d\'API ont échoué',
        
        // File info
        'file-size': 'TAILLE: {size}'
    },
    'es': {
        // Meta information
        'meta-title': 'IPFSBED - Alojamiento de imágenes IPFS descentralizado permanente | ipfsbed.is-an.org',
        'meta-keywords': 'IPFSBED,alojamiento de imágenes IPFS,IPFS,alojamiento de imágenes descentralizado,alojamiento de imágenes permanente,sistema de archivos interplanetario,alojamiento de imágenes,alojamiento de imágenes gratuito,carga de archivos',
        'meta-description': 'IPFSBED es un servicio de alojamiento de imágenes permanente y descentralizado basado en IPFS (sistema de archivos interplanetario). Admite múltiples métodos de carga, incluido arrastrar y soltar y pegar, y proporciona múltiples puertas de enlace de acceso confiables.',
        
        // UI elements
        'upload-text': 'Haga clic para cargar / Pegar / Arrastrar y soltar',
        'upload-description': 'Almacene y comparta archivos de forma permanente y descentralizada',
        'file-list': 'Lista de cargas',
        'copy-all': 'Copiar todo',
        'gateway-selector': 'Puerta de enlace de acceso:',
        'footer-project': 'Proyecto',
        'footer-more-gateways': 'Más puertas de enlace',
        'footer-copyright': '© 2021-2025 IPFSBED - Alojamiento de imágenes descentralizado basado en IPFS',
        
        // Toast messages
        'clipboard-empty': 'El navegador actual no admite la carga mediante pegado',
        'clipboard-no-file': 'No hay contenido en el portapapeles o el archivo de escritorio no es compatible',
        'unsupported-type': 'Tipo de archivo no compatible, solo se admiten formatos comunes como imágenes, documentos y archivos de texto',
        'file-too-large': 'El archivo cargado no puede exceder los {size}MB',
        'upload-error': '¡Error de carga! Por favor, inténtelo de nuevo más tarde',
        'copied-format': 'Enlace en formato {format} copiado al portapapeles',
        'copied-all': 'Todos los enlaces copiados al portapapeles',
        'all-apis-failed': 'Todos los intentos de API fallaron',
        
        // File info
        'file-size': 'TAMAÑO: {size}'
    }
};

// Check and set user preferred language or browser default
function initializeLanguage() {
    // Try to get saved language preference
    let userLang = localStorage.getItem('ipfsbed-language');
    
    if (!userLang) {
        // If no saved preference, detect browser language
        const browserLang = navigator.language || navigator.userLanguage;
        
        // Check if we support the full browser language code
        if (translations[browserLang]) {
            userLang = browserLang;
        } else {
            // Try to match just the primary language code (e.g., "en" from "en-US")
            const primaryLang = browserLang.split('-')[0];
            
            if (translations[primaryLang]) {
                userLang = primaryLang;
            } else {
                // Default to English if no match
                userLang = 'en';
            }
        }
        
        // Save the detected language preference
        localStorage.setItem('ipfsbed-language', userLang);
    }
    
    return userLang;
}

// Current language
let currentLang = initializeLanguage();

// Function to get translation string
function _t(key, replacements = {}) {
    // Get the translation for the current language
    const translation = translations[currentLang]?.[key] || translations['en'][key] || key;
    
    // Replace any placeholders with their values
    let result = translation;
    Object.entries(replacements).forEach(([placeholder, value]) => {
        result = result.replace(`{${placeholder}}`, value);
    });
    
    return result;
}

// Change the language and update UI
function changeLanguage(lang) {
    if (translations[lang]) {
        currentLang = lang;
        localStorage.setItem('ipfsbed-language', lang);
        updatePageLanguage();
        return true;
    }
    return false;
}

// Update all translatable elements on the page
function updatePageLanguage() {
    // Update meta tags
    document.title = _t('meta-title');
    document.querySelector('meta[name="keywords"]').setAttribute('content', _t('meta-keywords'));
    document.querySelector('meta[name="description"]').setAttribute('content', _t('meta-description'));
    
    // Update Open Graph and Twitter meta tags
    document.querySelector('meta[property="og:title"]').setAttribute('content', _t('meta-title'));
    document.querySelector('meta[property="og:description"]').setAttribute('content', _t('meta-description'));
    document.querySelector('meta[name="twitter:title"]').setAttribute('content', _t('meta-title'));
    document.querySelector('meta[name="twitter:description"]').setAttribute('content', _t('meta-description'));
    
    // Update UI elements
    document.querySelector('.upload .content .desc:nth-child(2)').textContent = _t('upload-text');
    document.querySelector('.upload .content .desc:nth-child(3)').textContent = _t('upload-description');
    document.querySelector('.filelist .title .title-text').textContent = _t('file-list');
    document.querySelector('.copyall').textContent = _t('copy-all');
    document.querySelector('label[for="gatewaySelect"]').textContent = _t('gateway-selector');
    
    // Update footer
    document.querySelector('#footer .info a:nth-child(1)').textContent = _t('footer-project');
    document.querySelector('#footer .info a:nth-child(2)').textContent = _t('footer-more-gateways');
    document.querySelector('#footer div').childNodes[2].textContent = _t('footer-copyright');
    
    // Update language selector to show current language
    document.querySelector('#langSelect').value = currentLang;
}

// Export functions and data
window.translations = translations;
window._t = _t;
window.changeLanguage = changeLanguage;
window.updatePageLanguage = updatePageLanguage;
window.currentLang = currentLang;
